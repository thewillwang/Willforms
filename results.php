<?phpsession_start();include_once "lib/lib.php";sql_login();if ( isset( $_SESSION['username']) ) {    $username = $_SESSION['username'];    $pass     = $_SESSION['pass'];    $check = mysql_query( "SELECT * FROM users WHERE username = '$username'" ) or die( mysql_error() );    while ( $info = mysql_fetch_array( $check ) ) {        if ( $pass != $info[ 'password' ] ) {            header( "Location: login.php" );        } else {        }    }} else {    header( "Location: login.php" );}?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Form Testing</title><script type="text/javascript" src="js/jquery.js"></script><script type="text/javascript" src="js/var.js"></script><script type="text/javascript" src="js/jquery.dataTables.js"></script><script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script><link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" /><link rel="stylesheet" href="css/form.css" /><link rel="stylesheet" href="css/jquery.dataTables.css" /> <script>  $(function() {    $( "#tabs" ).tabs();  });  </script></head><body>    <table cellpadding="0" cellspacing="0" border="0" class="display dataTable" id="example" width="100%" aria-describedby="example_info" style="width: 100%;">	<thead>		<tr role="row">                    <?php	$counter = 0;	include_once "lib/lib.php";	$file = $_GET['xml'];	if($file!=NULL)	{		$fil = file_get_contents($file);		$xml = new SimpleXMLElement($fil);		$tab = $xml->page->tab;                $tablname =  getTableNamebyDocLink($file);                for ($i =0;$i<count($tab);$i++){                echo "<th class=\"sorting_asc\" role=\"columnheader\" tabindex=\"0\" aria-controls=\"example\" rowspan=\"1\" colspan=\"1\" aria-sort=\"ascending\" aria-label=\"Rendering engine: activate to sort column descending\" style=\"width: 128px;\">".$tab[$i]->dataname."</th>";                }              echo"</tr>             </thead>            <tbody role=\"alert\" aria-live=\"polite\" aria-relevant=\"all\">                ";                sql_login();                $qeury = "select * from ".$tablname;                $result = mysql_query($qeury);                      if(!$result) {                             echo "Query failed\n<br><b>$qeury</b>\n";                             echo mysql_error(); // (Is that not the name)                        }                 while( $row = mysql_fetch_array($result)){                    echo "<tr class=\"gradeA odd\">";                    for ($i =0;$i<count($tab);$i++){                    echo"<td>".$row["".$tab[$i]->dbtablename]."</td>";                    }                    echo "</tr>";                }	                      }                  else {        echo " Form is not found, or you do not have the permission to check out! ";        }?>            </tbody></table>            <button type="button" onclick="downloadURL('http://willwang.org/form/lib/GenerateExcel.php')"  >download XlS</button>            <button type="button" onclick="downloadURL('http://willwang.org/form/lib/GenerateCSV.php')"  >download CSV</button>    <script>    var downloadURL = function downloadURL(url) {	    var hiddenIFrameID = 'hiddenDownloader';	        iframe = document.getElementById(hiddenIFrameID);	    if (iframe === null) {	        iframe = document.createElement('iframe');	        iframe.id = hiddenIFrameID;	        iframe.style.display = 'none';	        document.body.appendChild(iframe);	    }	    iframe.src = url+"?xml=<?php echo $file; ?>";	};    $(document).ready(function() {    $('.dataTable').dataTable();    } );    </script></body></html>
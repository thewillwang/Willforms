<?phpinclude_once "Config.php";function DateForm($node,$counter){	$fil = file_get_contents("./FormType/Date.html");	$patterns = array();	$replacements = array();        $patterns[1] = '/_number__/';	$replacements[1] = ''.$counter;  	$patterns[5] = '/titleField/';	$replacements[5] = $node->title;	$patterns[6] = '/hintField/';	$replacements[6] = $node->hint;        $patterns[8] = '/dataNameField/';	$replacements[8] = $node->dataname; 	echo"<div id=\"content".$counter."\">".	preg_replace($patterns, $replacements, $fil).	"</div>";}function text($node,$counter){	$fil = file_get_contents("./FormType/Text_File.html");	$patterns = array();	$replacements = array();        $patterns[1] = '/_number__/';	$replacements[1] = ''.$counter;  	$patterns[5] = '/titleField/';	$replacements[5] = $node->title;	$patterns[6] = '/hintField/';	$replacements[6] = $node->hint;        $patterns[8] = '/dataNameField/';	$replacements[8] = $node->dataname; 	echo"<div id=\"content".$counter."\">".	preg_replace($patterns, $replacements, $fil).	"</div>";}function SingalSelect($node,$counter){	$fil = file_get_contents("./FormType/SelectAdmin.html");	$patterns = array();	$replacements = array();        $patterns[1] = '/_number__/';	$replacements[1] = ''.$counter;          $patterns[2] =  '/style=\"display:none;\"><\!--selfEntireOpinion indicator -->/';        if ( $node->userentire=="1"){            $replacements[2] = 'style=\"display:block;\"><!--selfEntireOpinion indicator -->';         }  else {            $replacements[2] = 'style=\"display:none;\"><!--selfEntireOpinion indicator -->';         } 	$patterns[5] = '/titleField/';	$replacements[5] = $node->title;	$patterns[6] = '/hintField/';	$replacements[6] = $node->hint;        $patterns[8] = '/dataNameField/';	$replacements[8] = $node->dataname;         //dynamically create input field        $tab = $node->label;        $inputs = "";        for ($i =0;$i<count($tab);$i++){            $inputs .= "<input type=\"radio\" name=\"SingalSelect".$counter."\" id = \"SingalSelectValue".$counter."_".$i."\" value = \"".$tab[$i]."\"><label onclick=\"$('#SingalSelectValue".$counter."_".$i."').prop('checked', true);\" id=\"SingalSelectText".$counter."_".$i."\">".$tab[$i]."</label></input><br>";        }        $patterns[9] = '/_inputs_file_insert__/';	$replacements[9] =  $inputs; 	echo"<div id=\"content".$counter."\">".	preg_replace($patterns, $replacements, $fil).	"</div>";	}/**************************************************Client Respons Page***************************************************/function SingleSelectClient($node,$counter){    	$fil = file_get_contents("./FormType/SingleSelectClient.html");	$patterns = array();	$replacements = array();	$patterns[1] = '/titleField/';	$replacements[1] = $node->title;	$patterns[2] = '/hintField/';	$replacements[2] = $node->hint;        $patterns[3] = '/_number__/';	$replacements[3] = ''.$counter;          $patterns[4] = '/dataNameField/';	$replacements[4] = $node->dataname;         $tab = $node->label;        $patterns[5] = '/selfEntireOpinionDisplayProperty/';        if ( $node->userentire=="1"){            $replacements[5] = 'block';         }  else {            $replacements[5] = 'none';         }                   $inputs = "";        for ($i =0;$i<count($tab);$i++){            $inputs .= "<input type=\"radio\" name=\"".$node->dbtablename."\" id = \"SingalSelectValue".$counter."_".$i."\" value =\" ".$tab[$i]."\"><label onclick=\"$('#SingalSelectValue".$counter."_".$i."').prop('checked', true);\" id=\"SingalSelectText".$counter."_".$i."\">".$tab[$i]."</label></input><br>";        }        $patterns[6] = '/_inputs_file_insert__/';	$replacements[6] =  $inputs;         $patterns[7] = '/_SingalSelect__/';	$replacements[7] =  $node->dbtablename;         	echo"<div id=\"content".$counter."\">".                	preg_replace($patterns, $replacements, $fil).	"</div>";}function dateClient($node,$counter){    	$fil = file_get_contents("./FormType/DateClient.html");	$patterns = array();	$replacements = array();	$patterns[0] = '/titleField/';	$replacements[0] = $node->title;	$patterns[1] = '/hintField/';	$replacements[1] = $node->hint;        $patterns[2] = '/_TEXT/';        $replacements[2] = $node->dbtablename;	echo"<div id=\"content".$counter."\">".	preg_replace($patterns, $replacements, $fil).	"</div>";}function textClient($node,$counter){    	$fil = file_get_contents("./FormType/TextClient.html");	$patterns = array();	$replacements = array();	$patterns[0] = '/titleField/';	$replacements[0] = $node->title;	$patterns[1] = '/hintField/';	$replacements[1] = $node->hint;        $patterns[2] = '/_TEXT/';        $replacements[2] = $node->dbtablename;	echo"<div id=\"content".$counter."\">".	preg_replace($patterns, $replacements, $fil).	"</div>";}/* * Remove \" and \' replace with html sperical charator expression */function GenExp($val){    $old = array("\\\"", '\\\'');    $new = array("&quot;", "&apos;");    $form = str_replace($old,$new,$val); 	//error_log ($form);    return $form;}function sql_login(){    global $config;    mysql_connect($config['DBConnection'], $config['DBAdminAccount'],  $config['DBPassword']) or die(mysql_error());    mysql_select_db( $config['DBName']) or die(mysql_error());}function getTableNamebyDocLink($doclink){	sql_login();	$query = "SELECT userID,docID FROM userDocs  WHERE `docPath` = '".$doclink."'";        $info= mysql_fetch_array(mysql_query($query));        //error_log($query);        $query = " SELECT username from users where userID = ".$info['userID']."";        $infos= mysql_fetch_array(mysql_query($query));       // error_log($query); 	mysql_close();        return   $infos['username']."_". $info['docID'];}function checkLogin(){    sql_login();    check_login_timeout();    if ( isset( $_SESSION['username']) ) {            $username = $_SESSION['username'];            $pass     = $_SESSION['pass'];            $check = mysql_query( "SELECT * FROM users WHERE username = '$username'" ) or die( mysql_error() );            while ( $info = mysql_fetch_array( $check ) ) {                if ( $pass != $info[ 'password' ] ) {                    header( "Location: login.php" );                } else {                }        }    } else {        header( "Location: login.php" );    }}function check_login_timeout(){           global $config;       if(isset($_SESSION['LoginTimeout'])){            if($_SESSION['LoginTimeout'] > time())            {                // echo "timeoutime: ".  $_SESSION['LoginTimeout'] . " current time:  ". time();                $_SESSION['LoginTimeout'] = time() + ($config["LoginTimeout"]);            }            else            {                session_unset();                session_destroy();                header( "Location: login.php" );            }                    }}class excelCell{	public static $counter = 0;		function reset(){		self::$counter =0;	}		function next(){		$returnVal = '';		$remain = self::$counter;		do{			$i = $remain%26;			$returnVal = substr('ABCDEFGHIJKLMNOPQRSTUVWXYZ',$i,1).$returnVal;			$remain = intval($remain/26);		}while($remain>0);		self::$counter++;		return $returnVal;	}}?>